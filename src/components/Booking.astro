---
import { getLangFromUrl, useTranslations } from "@i18n/utils";
import BookingSection from "@components/Booking";
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<script is:inline>
  const initAnimations = () => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("show");
          }
        });
      },
      { threshold: 0.1 }
    );

    document.querySelectorAll(".scroll-animate").forEach((el) => {
      observer.observe(el);
    });
  };

  if (document.readyState === "complete") {
    initAnimations();
  } else {
    window.addEventListener("load", initAnimations);
  }
</script>

<section id="Booking" class="booking-section bg-white py-8 lg:py-24">
  <div class="container mx-auto text-center">
    <h1
      class="scroll-animate animate-fade-up mb-4 text-4xl font-bold text-black lg:text-5xl"
    >
      {t("booking.title")}
    </h1>

    <p
      class="scroll-animate animate-fade-up text-[#9DC216] text-2xl lg:text-3xl py-4"
      style="transition-delay: 0.2s"
    >
      {t("booking.subtitle")}
    </p>

    <div class="grid grid-cols-1 gap-4 py-4 lg:grid-cols-2 lg:py-8">
      <div
        class="scroll-animate animate-fade-left flex flex-col lg:mb-0"
        style="transition-delay: 0.3s"
      >
        <img
          src="/images/font.png"
          alt="Ilustración dental"
          class="h-auto mx-auto mb-8"
        />
      </div>

      <div
        class="scroll-animate animate-fade-right"
        style="transition-delay: 0.4s"
      >
        <div class="flex flex-col px-4 bg-[#f9fdf3] rounded-lg shadow-md">
          <h1
            class="scroll-animate animate-fade-up font-medium px-6 py-4 text-2xl text-black lg:text-start"
            style="transition-delay: 0.5s"
          >
            {t("booking.formTitle")}
          </h1>

          <div
            class="scroll-animate animate-fade-up flex items-center justify-start lg:justify-start mb-4 ml-4 mr-4"
            style="transition-delay: 0.6s"
          >
            <img
              src="/images/ubi.svg"
              class="w-12 h-12"
              alt="Icono ubicación"
            />
            <h3 class="text-start ml-2">
              {t("booking.location")}
            </h3>
          </div>

          <div
            class="scroll-animate animate-fade-up flex items-center justify-center lg:justify-start mb-4 ml-4 mr-4"
            style="transition-delay: 0.7s"
          >
            <img
              src="/images/comilla.svg"
              class="w-12 h-12"
              alt="Icono comillas"
            />
            <h3 class="font-bold ml-2">{t("booking.chooseAppointment")}</h3>
            <img
              src="/images/comilla.svg"
              class="w-12 h-12 transform rotate-180"
              alt="Icono comillas"
            />
          </div>

          <div
            class="scroll-animate animate-fade-up mb-4"
            style="transition-delay: 0.8s"
          >
            <h3
              class="flex justify-center lg:justify-start px-8 text-[#74af50]"
            >
              {t("booking.timezone")}
            </h3>
          </div>
        </div>
        <section>
          <BookingSection client:only="react" />
        </section>
      </div>
    </div>
  </div>
</section>
